package ru.nsu.tumilevich;import org.junit.jupiter.api.AfterEach;import org.junit.jupiter.api.BeforeEach;import org.junit.jupiter.api.Test;import java.io.ByteArrayInputStream;import java.io.ByteArrayOutputStream;import java.io.InputStream;import java.io.PrintStream;import java.util.Scanner;import static org.junit.jupiter.api.Assertions.assertTrue;/** * Тесты для основного игрового цикла в классе BlackjackMain. */class BlackjackMainTest {	private final InputStream originalSystemIn = System.in;	private final PrintStream originalSystemOut = System.out;	private ByteArrayOutputStream testOutput;	@BeforeEach	void SetUp() {		testOutput = new ByteArrayOutputStream();		System.setOut(new PrintStream(testOutput));	}	@AfterEach	void TearDown() {		System.setIn(originalSystemIn);		System.setOut(originalSystemOut);	}	private void ProvideInput(String data) {		ByteArrayInputStream testIn = new ByteArrayInputStream(data.getBytes());		System.setIn(testIn);	}	private String GetOutput() {		return testOutput.toString().replaceAll("\\r\\n", "\n");	}	@Test	void TestMain_SingleRoundPlayerWins() {		/* Симулируем ввод: один раунд, где игрок выбирает Pass, затем выход */		String input = "Yes\nPass\nNo\n";		ProvideInput(input);		Scanner originalScanner = BlackjackMain.scanner;		try {			BlackjackMain.scanner = new Scanner(System.in);			BlackjackMain.main(new String[]{});		} finally {			BlackjackMain.scanner = originalScanner;		}		String output = GetOutput();		assertTrue(output.contains("Добро пожаловать в Блэкджек!"));		assertTrue(output.contains("Раунд 1"));	}	@Test	void TestMain_MultipleRounds() {		/* Симулируем ввод: несколько раундов */		String input = "Yes\nPass\nYes\nPass\nNo\n";		ProvideInput(input);		Scanner originalScanner = BlackjackMain.scanner;		try {			BlackjackMain.scanner = new Scanner(System.in);			BlackjackMain.main(new String[]{});		} finally {			BlackjackMain.scanner = originalScanner;		}		String output = GetOutput();		assertTrue(output.contains("Раунд 1"));		assertTrue(output.contains("Раунд 2"));		assertTrue(output.contains("Продолжаем?"));	}	@Test	void TestRaund_PlayerBusts() {		/* Тестируем случай, когда игрок перебирает */		/* Берем много карт, чтобы гарантированно перебрать */		String input = "Take\nTake\nTake\nTake\nTake\nTake\nTake\nTake\nTake\nTake\n";		ProvideInput(input);		Scanner originalScanner = BlackjackMain.scanner;		try {			BlackjackMain.scanner = new Scanner(System.in);			int result = BlackjackMain.Raund(1);			assertTrue(result == 0 || result == 1);			String output = GetOutput();			assertTrue(output.contains("Вы получили") || output.contains("проиграли") || output.contains("выиграли"));		} finally {			BlackjackMain.scanner = originalScanner;		}	}}